(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:n="",children:d,iconNode:i,...c},x)=>(0,s.createElement)("svg",{ref:x,...a,width:t,height:t,stroke:e,strokeWidth:o?24*Number(l)/Number(t):l,className:r("lucide",n),...c},[...i.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),o=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...o},n)=>(0,s.createElement)(l,{ref:n,iconNode:t,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...o}));return a.displayName=`${e}`,a},n=o("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),d=o("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=o("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]),c=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=o("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),m=o("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u=[{id:"issues",label:"Issues",icon:n},{id:"tasks",label:"Tasks",icon:d},{id:"photos",label:"Photos",icon:i},{id:"search",label:"Search & Filters",icon:c},{id:"reports",label:"Reports",icon:x},{id:"import-export",label:"Import / Export",icon:m},{id:"settings",label:"Settings",icon:o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}];function p({currentScreen:e,onScreenChange:s}){return(0,t.jsxs)("aside",{className:"w-56 border-r border-border bg-secondary flex flex-col",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border flex items-center px-6 gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary rounded-md flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"DB"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-semibold text-sm text-foreground",children:"Issue Tracker"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"Professional Edition"})]})]}),(0,t.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:u.map(r=>{let a=r.icon,l=e===r.id;return(0,t.jsxs)("button",{onClick:()=>s(r.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-sm font-medium ${l?"bg-primary text-white":"text-foreground hover:bg-surface-elevated"}`,children:[(0,t.jsx)(a,{size:18}),(0,t.jsx)("span",{children:r.label})]},r.id)})}),(0,t.jsxs)("div",{className:"border-t border-border p-4 text-xs text-text-tertiary",children:[(0,t.jsx)("p",{children:"Version 1.0"}),(0,t.jsx)("p",{className:"mt-2",children:"© 2026 Issue Tracker"})]})]})}let h=o("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),b=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=o("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),f=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);async function y(){return await e.A(46623)}async function j(){return(await y()).getAllFields()}async function v(){return await e.A(87944)}async function N(){return(await v()).getAllIssues()}async function k(e){let t=await v();return t.queryIssues?t.queryIssues(e):[]}async function w(e){return(await v()).createIssue(e)}async function S(e){return(await v()).getIssueById(e)}e.i(47167);let C="issueFilters",I="filterPresets",D="filterHistory";function E(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)({field:"",op:"eq",value:""}),[l,o]=(0,s.useState)([]),[n,d]=(0,s.useState)([]);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(C);e&&t(JSON.parse(e));let s=localStorage.getItem(I);s&&o(JSON.parse(s));let r=localStorage.getItem(D);r&&d(JSON.parse(r))}catch(e){console.error("[v0] Error loading filters from localStorage:",e)}},[]),(0,s.useEffect)(()=>{try{localStorage.setItem(C,JSON.stringify(e))}catch(e){console.error("[v0] Error saving filters to localStorage:",e)}},[e]);let i=e=>{t(e),e.length>0&&d(t=>{let s=[e,...t].slice(0,5);try{localStorage.setItem(D,JSON.stringify(s))}catch(e){console.error("[v0] Error saving filter history:",e)}return s})},c=(()=>{if(0===n.length)return[];let e={};return n.forEach(t=>{t.forEach(t=>{let s=`${t.field}:${t.value}`;e[s]=(e[s]||0)+1})}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,5).map(([e])=>{let[t,s]=e.split(":");return{field:t,op:"eq",value:s}})})();return{filters:e,setFilters:i,addFilter:t=>{t.field&&""!==t.value&&null!==t.value&&(i([...e,t]),a({field:"",op:"eq",value:""}))},removeFilter:t=>{i(e.filter((e,s)=>s!==t))},clearFilters:()=>{i([]),a({field:"",op:"eq",value:""})},currentFilter:r,setCurrentFilter:a,savePreset:t=>{if(!t.trim()||0===e.length)return;let s={id:Date.now().toString(),name:t.trim(),filters:[...e],createdAt:Date.now()};o(e=>{let t=[...e,s];try{localStorage.setItem(I,JSON.stringify(t))}catch(e){console.error("[v0] Error saving preset:",e)}return t})},loadPreset:e=>{let t=l.find(t=>t.id===e);t&&i([...t.filters])},deletePreset:e=>{o(t=>{let s=t.filter(t=>t.id!==e);try{localStorage.setItem(I,JSON.stringify(s))}catch(e){console.error("[v0] Error deleting preset:",e)}return s})},presets:l,filterHistory:n,suggestedFilters:c}}function T({fields:e,filters:r,onClose:a,onApply:l}){let[o,n]=(0,s.useState)(r),[d,i]=(0,s.useState)("AND");function c(e){switch(e){case"number":return[{value:"eq",label:"="},{value:"lt",label:"<"},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"gte",label:">="},{value:"in",label:"in"}];case"date":return[{value:"eq",label:"="},{value:"lt",label:"<"},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"gte",label:">="}];case"select":return[{value:"eq",label:"="},{value:"in",label:"in"}];default:return[{value:"contains",label:"contains"},{value:"eq",label:"="},{value:"in",label:"in"}]}}let x=(e,t,s)=>{n(r=>r.map((r,a)=>a===e?{...r,[t]:s}:r))};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-auto flex flex-col",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border px-8 py-4 flex items-center justify-between bg-surface-elevated sticky top-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"Advanced Filters"}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-secondary rounded-lg transition-colors text-text-secondary hover:text-foreground",children:(0,t.jsx)(f,{size:20})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-surface rounded-lg border border-border",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-text-secondary",children:"Match filters:"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>i("AND"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"AND"===d?"bg-primary text-white":"bg-surface-elevated text-text-secondary hover:bg-secondary"}`,children:"ALL (AND)"}),(0,t.jsx)("button",{onClick:()=>i("OR"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"OR"===d?"bg-primary text-white":"bg-surface-elevated text-text-secondary hover:bg-secondary"}`,children:"ANY (OR)"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:o.map((s,r)=>{let a,l;return(0,t.jsxs)("div",{className:"p-4 bg-surface rounded-lg border border-border space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-text-secondary",children:["Condition ",r+1]}),o.length>1&&(0,t.jsx)("button",{onClick:()=>{n(e=>e.filter((e,t)=>t!==r))},className:"text-xs px-3 py-1 text-error hover:bg-error/10 rounded transition-colors",children:"Remove"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-text-secondary font-medium",children:"Field"}),(0,t.jsxs)("select",{value:s.field,onChange:t=>{let s=t.target.value,a=e.find(e=>e.name===s),l=c(a?.type),o=l&&l.length?l[0].value:"eq";x(r,"field",s),x(r,"op",o)},className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select field"}),e.map(e=>(0,t.jsx)("option",{value:e.name,children:e.label||e.name},e.name))]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-text-secondary font-medium",children:"Operator"}),(0,t.jsx)("select",{value:s.op,onChange:e=>x(r,"op",e.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:(a=e.find(e=>e.name===s.field),c(a?.type).map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-text-secondary font-medium",children:"Value"}),(l=e.find(e=>e.name===s.field),s.field&&l?"select"===l.type&&l.options&&l.options.length?"in"===s.op?(0,t.jsx)("select",{multiple:!0,value:Array.isArray(s.value)?s.value:[],onChange:e=>{x(r,"value",Array.from(e.target.selectedOptions).map(e=>e.value))},className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:l.options.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}):(0,t.jsxs)("select",{value:s.value,onChange:e=>x(r,"value",e.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select..."}),l.options.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):"number"===l.type?(0,t.jsx)("input",{type:"number",value:s.value,onChange:e=>x(r,"value",""===e.target.value?"":Number(e.target.value)),placeholder:"Enter number",className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):"date"===l.type?(0,t.jsx)("input",{type:"date",value:s.value,onChange:e=>x(r,"value",e.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):(0,t.jsx)("input",{value:s.value,onChange:e=>x(r,"value",e.target.value),placeholder:"Enter value",className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):(0,t.jsx)("input",{value:s.value,onChange:e=>x(r,"value",e.target.value),placeholder:"Select a field first",className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",disabled:!0}))]})]},r)})}),(0,t.jsx)("button",{onClick:()=>{n(e=>[...e,{field:"",op:"eq",value:""}])},className:"w-full px-4 py-3 border-2 border-dashed border-border rounded-lg text-text-secondary hover:text-foreground hover:border-primary transition-colors text-sm font-medium",children:"+ Add another condition"})]}),(0,t.jsxs)("div",{className:"h-20 border-t border-border px-8 py-4 flex items-center justify-end gap-3 bg-surface-elevated sticky bottom-0",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 text-foreground rounded-lg border border-border hover:bg-secondary transition-colors text-sm font-medium",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>l(o),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:"Apply Filters"})]})]})})}function A({open:e,defaultValue:r="",title:a="",onConfirm:l,onCancel:o}){let[n,d]=(0,s.useState)(r),[i,c]=(0,s.useState)(null),x=(0,s.useRef)(null);return((0,s.useEffect)(()=>{d(r),c(null)},[r,e]),(0,s.useEffect)(()=>{if(e){let e=setTimeout(()=>x.current?.focus(),50);return()=>clearTimeout(e)}},[e]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-lg w-full max-w-md p-6",children:[a?(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:a}):null,(0,t.jsx)("input",{ref:x,value:n,onChange:e=>{d(e.target.value),i&&c(null)},onKeyDown:e=>{let t=n.trim();"Enter"===e.key?0===t.length?c("Name cannot be empty"):l(t):"Escape"===e.key&&o()},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground mb-2",placeholder:"Enter name"}),i?(0,t.jsx)("p",{className:"text-sm text-error mb-2",children:i}):null,(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>o(),className:"px-3 py-2 rounded-lg bg-transparent border border-border text-text-secondary hover:bg-secondary",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{let e=n.trim();0===e.length?c("Name cannot be empty"):l(e)},disabled:0===n.trim().length,className:`px-3 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 ${0===n.trim().length?"opacity-50 pointer-events-none":""}`,children:"Save"})]})]})}):null}function M({onSelectIssue:e,showFilters:r=!0}){let a,l,[o,n]=(0,s.useState)([]),[d,i]=(0,s.useState)([]),[c,x]=(0,s.useState)(!0),[m,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),{filters:b,setFilters:g,addFilter:f,removeFilter:y,clearFilters:v,currentFilter:w,setCurrentFilter:S,savePreset:C,loadPreset:I,deletePreset:D,presets:M,filterHistory:P,suggestedFilters:z}=E(),[O,F]=(0,s.useState)(!0),[R,q]=(0,s.useState)(!1),[$,K]=(0,s.useState)(!1),[J,L]=(0,s.useState)(!1),V=(0,s.useRef)(null),H=(0,s.useRef)(null);function U(e){switch(e){case"number":return[{value:"eq",label:"="},{value:"lt",label:"<"},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"gte",label:">="},{value:"in",label:"in"}];case"date":return[{value:"eq",label:"="},{value:"lt",label:"<"},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"gte",label:">="}];case"select":return[{value:"eq",label:"="},{value:"in",label:"in"}];default:return[{value:"contains",label:"contains"},{value:"eq",label:"="},{value:"in",label:"in"}]}}if((0,s.useEffect)(()=>{(async()=>{try{x(!0);let e=await j();i(e);let t=await N();n(t||[])}catch(e){u(e instanceof Error?e.message:"An error occurred"),console.error("[v0] Error fetching data:",e)}finally{x(!1)}})()},[]),(0,s.useEffect)(()=>{if(console.log("Filters changed:",b),O&&0!==b.length)return H.current&&clearTimeout(H.current),H.current=setTimeout(async()=>{try{x(!0);let e=await k(b);n(e||[])}catch(e){u(e instanceof Error?e.message:"Failed to query issues")}finally{x(!1)}},300),()=>{H.current&&clearTimeout(H.current)}},[b,O]),(0,s.useEffect)(()=>{r&&setTimeout(()=>V.current?.focus(),50)},[r]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{c&&(h(!0),u("Taking longer than usual to load issues. Please check your connection or try again later."))},5e3);return()=>clearTimeout(e)},[c]),c&&!p)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-text-secondary",children:"Loading issues..."})});if(m)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-error",children:m})});if(0===o.length)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-text-secondary mb-4",children:"No issues found."}),b.length>0?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)("p",{className:"text-text-secondary",children:"Your filters returned no results."}),(0,t.jsx)("button",{onClick:async()=>{v();try{x(!0);let e=await N();n(e||[]),u(null)}catch(e){u(e instanceof Error?e.message:"Failed to load issues")}finally{x(!1)}},className:"px-3 py-2 bg-primary text-white rounded-lg",children:"Clear filters"})]}):(0,t.jsx)("p",{className:"text-text-secondary",children:"Create one to get started."})]})});let B=d.sort((e,t)=>(parseInt(e.id||"0")||0)-(parseInt(t.id||"0")||0)).slice(0,15);return(0,t.jsxs)("div",{className:"overflow-auto",children:[r&&(0,t.jsxs)("div",{className:"p-4 border-b border-border bg-surface-elevated space-y-3",children:[M.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-xs text-text-secondary font-medium",children:"Quick filters:"}),M.map(e=>(0,t.jsx)("button",{onClick:()=>I(e.id),className:"px-3 py-1 text-xs bg-primary/20 text-primary rounded-full hover:bg-primary/30 transition-colors",children:e.name},e.id))]}),z.length>0&&0===b.length&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-xs text-text-secondary font-medium",children:"Suggested:"}),z.slice(0,3).map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{f(e)},className:"px-3 py-1 text-xs bg-secondary/50 text-text-secondary rounded-full hover:bg-secondary transition-colors",children:[e.field,": ",String(e.value)]},s))]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-text-secondary mr-2",children:"Field"}),(0,t.jsxs)("select",{ref:V,value:w.field,onChange:e=>{let t=e.target.value,s=d.find(e=>e.name===t),r=U(s?.type);S({field:t,op:r&&r.length?r[0].value:"eq",value:""})},className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select field"}),d.map(e=>(0,t.jsx)("option",{value:e.name,children:e.label||e.name},e.name))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-text-secondary mr-2",children:"Operator"}),(0,t.jsx)("select",{value:w.op,onChange:e=>S({...w,op:e.target.value}),className:"px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:(l=d.find(e=>e.name===w.field),U(l?.type).map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,t.jsx)("div",{className:"flex-1",children:(a=d.find(e=>e.name===w.field),w.field&&a?"select"===a.type&&a.options&&a.options.length?"in"===w.op?(0,t.jsx)("select",{multiple:!0,value:Array.isArray(w.value)?w.value:[],onChange:e=>{let t=Array.from(e.target.selectedOptions).map(e=>e.value);S({...w,value:t})},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:a.options.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}):(0,t.jsxs)("select",{value:w.value,onChange:e=>S({...w,value:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select..."}),a.options.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):"number"===a.type?(0,t.jsx)("input",{type:"number",value:w.value,onChange:e=>S({...w,value:""===e.target.value?"":Number(e.target.value)}),onKeyDown:e=>{"Enter"===e.key&&f(w)},placeholder:"Enter number",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):"date"===a.type?(0,t.jsx)("input",{type:"date",value:w.value,onChange:e=>S({...w,value:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&f(w)},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):(0,t.jsx)("input",{value:w.value,onChange:e=>S({...w,value:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&f(w)},placeholder:"Enter value",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm"}):(0,t.jsx)("input",{value:w.value,onChange:e=>S({...w,value:e.target.value}),placeholder:"Select a field to enter a value",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",disabled:!0}))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>f(w),className:"px-3 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90 transition-colors",children:"Add"}),(0,t.jsx)("button",{onClick:()=>K(!0),className:"px-3 py-2 bg-secondary text-foreground rounded-lg text-sm hover:bg-secondary/80 transition-colors",children:"Advanced"}),(0,t.jsx)("button",{onClick:async()=>{v();try{x(!0);let e=await N();n(e||[])}catch(e){u(e instanceof Error?e.message:"Failed to load issues")}finally{x(!1)}},className:"px-3 py-2 bg-transparent text-foreground rounded-lg border border-border text-sm hover:bg-secondary transition-colors",children:"Clear"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"auto-apply",checked:O,onChange:e=>F(e.target.checked),className:"w-4 h-4 rounded border-border"}),(0,t.jsx)("label",{htmlFor:"auto-apply",className:"text-sm text-text-secondary cursor-pointer",children:"Auto-apply filters"})]})]}),b.length>0&&(0,t.jsxs)("div",{className:"p-3 flex gap-2 flex-wrap items-center border-b border-border bg-surface",children:[b.map((e,s)=>(0,t.jsxs)("div",{className:"px-3 py-1 bg-surface-elevated rounded-full border border-border flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm",children:`${e.field} ${e.op} ${String(e.value)}`}),(0,t.jsx)("button",{onClick:()=>y(s),className:"text-xs px-2 hover:text-error transition-colors",children:"×"})]},s)),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>L(!0),className:"px-2 py-1 text-xs bg-primary/20 text-primary rounded hover:bg-primary/30 transition-colors",children:"Save preset"}),(0,t.jsx)(A,{open:J,title:"Save filter preset",defaultValue:"",onCancel:()=>L(!1),onConfirm:e=>{L(!1),e&&C(e)}})]})]}),P.length>0&&0===b.length&&(0,t.jsxs)("div",{className:"p-3 border-b border-border bg-surface text-xs",children:[(0,t.jsx)("p",{className:"text-text-secondary mb-2",children:"Recent filters:"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:P.slice(0,5).map((e,s)=>(0,t.jsx)("button",{onClick:()=>g(e),className:"px-2 py-1 bg-surface-elevated rounded hover:bg-secondary transition-colors text-text-secondary hover:text-foreground",children:e.map(e=>`${e.field}=${e.value}`).join(", ")},s))})]}),$&&(0,t.jsx)(T,{fields:d,filters:b,onClose:()=>K(!1),onApply:e=>{g(e),K(!1)}}),(0,t.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-surface-elevated border-b border-border",children:(0,t.jsx)("tr",{children:B.map(e=>(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary whitespace-nowrap",children:e.label||e.name},e.name))})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:o.map(s=>(0,t.jsx)("tr",{onClick:()=>e(s),className:"cursor-pointer hover:bg-secondary transition-colors",children:B.map(e=>(0,t.jsx)("td",{className:"px-6 py-4 text-foreground whitespace-nowrap overflow-hidden text-ellipsis max-w-xs",children:s[e.name]||"-"},`${s.id}-${e.name}`))},s.id))})]})]})}function P({issueId:e,isOpen:r,onClose:a}){let[l,o]=(0,s.useState)(null),[n,d]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0),[x,m]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let t=async()=>{try{c(!0);let[t,s]=await Promise.all([j(),S(e)]);d(t),o(s)}catch(e){m(e instanceof Error?e.message:"An error occurred"),console.error("[v0] Error fetching data:",e)}finally{c(!1)}};e&&r&&t()},[e,r]),!r)return null;if(i)return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-background rounded-lg p-8",children:(0,t.jsx)("p",{className:"text-text-secondary",children:"Loading issue details..."})})});if(x)return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl p-8",children:[(0,t.jsx)("p",{className:"text-error",children:x}),(0,t.jsx)("button",{onClick:a,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover",children:"Close"})]})});if(!l)return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl p-8",children:[(0,t.jsx)("p",{className:"text-text-secondary",children:"No issue data found"}),(0,t.jsx)("button",{onClick:a,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover",children:"Close"})]})});let u=n.reduce((e,t)=>{let s=t.type;return e[s]||(e[s]=[]),e[s].push(t),e},{});return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 border-b border-border px-8 bg-surface-elevated shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"Issue Details"}),(0,t.jsxs)("p",{className:"text-sm text-text-secondary",children:["ID: ",e]})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-secondary rounded-lg transition-colors text-text-secondary hover:text-foreground",children:(0,t.jsx)(f,{size:20})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto px-8 py-8",children:Object.entries(u).map(([e,s])=>(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h4",{className:"font-semibold text-foreground mb-6 capitalize",children:[e," Fields"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-6",children:s.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:e.label||e.name}),(0,t.jsx)("p",{className:"mt-2 text-foreground break-words",children:l[e.name]?String(l[e.name]):"-"})]},e.name))})]},e))})]})})}function z({isOpen:e,onClose:r,onSubmit:a}){let[l,o]=(0,s.useState)([]),[n,d]=(0,s.useState)(!0),[i,c]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)({}),h=(0,s.useRef)(null),b=(0,s.useRef)(null),[g,y]=(0,s.useState)({address:"",observation:"",notes:""});(0,s.useEffect)(()=>{(async()=>{try{d(!0);let e=(await j()).sort((e,t)=>(parseInt(e.id||"0")||0)-(parseInt(t.id||"0")||0));o(e);let t={};e.forEach(e=>{t[e.name]=(e.type,"")}),p(t)}catch(e){c(e instanceof Error?e.message:"Failed to load fields"),console.error("[v0] Error loading fields:",e)}finally{d(!1)}})()},[]);let v=(e,t)=>{p(s=>({...s,[e]:t}))},N=async e=>{try{if(window.myappAPI&&"function"==typeof window.myappAPI.selectFolder){let t=await window.myappAPI.selectFolder();t&&v(e,t);return}}catch(e){console.warn("selectFolder via myappAPI failed:",e)}b.current=e,h.current&&(h.current.value="",h.current.click())},k=async()=>{try{m(!0),await w(u),a&&a();let e={};l.forEach(t=>{e[t.name]=""}),p(e),r()}catch(e){c(e instanceof Error?e.message:"Failed to create issue"),console.error("[v0] Error creating issue:",e)}finally{m(!1)}};return e?n?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-background rounded-lg p-8",children:(0,t.jsx)("p",{className:"text-text-secondary",children:"Loading form..."})})}):(console.log("Rendering NewIssueForm with fields:",l),(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 border-b border-border px-8 bg-surface-elevated shrink-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"Create New Issue"}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-secondary rounded-lg transition-colors text-text-secondary hover:text-foreground",children:(0,t.jsx)(f,{size:20})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto px-8 py-8",children:[i&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-error/10 border border-error rounded-lg text-error",children:i}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-6",children:l.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:[e.label||e.name,e.required&&(0,t.jsx)("span",{className:"text-error ml-1",children:"*"})]}),"textarea"===e.type?(0,t.jsx)("textarea",{placeholder:e.placeholder||`Enter ${e.label||e.name}...`,value:u[e.name]||"",onChange:t=>v(e.name,t.target.value),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary h-24 resize-none"}):"select"===e.type?(0,t.jsxs)("select",{value:u[e.name]||"",onChange:t=>v(e.name,t.target.value),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary",children:[(0,t.jsx)("option",{value:"",children:"Select an option"}),e.options?.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):"path"===e.type?(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:u[e.name]||"",placeholder:e.placeholder||`Select folder for ${e.label||e.name}...`,className:"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none"}),!u[e.name]&&(0,t.jsx)("button",{type:"button",onClick:()=>N(e.name),className:"px-3 py-2 bg-secondary text-foreground rounded-lg hover:bg-secondary-hover transition-colors",children:"Select Folder"}),u[e.name]&&(0,t.jsx)("button",{type:"button",onClick:()=>v(e.name,""),className:"px-2 py-2 text-text-secondary hover:bg-secondary rounded-lg","aria-label":`Clear ${e.label||e.name}`,children:"Clear"})]}):(0,t.jsx)("input",{type:e.type,placeholder:e.placeholder||`Enter ${e.label||e.name}...`,value:u[e.name]||"",onChange:t=>v(e.name,t.target.value),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary"})]},e.name))})}),(0,t.jsx)("input",{ref:h,type:"file",style:{display:"none"},webkitdirectory:"",onChange:e=>{let t=e.target.files,s=b.current;if(b.current=null,!s)return;if(!t||0===t.length)return void v(s,"");let r=t[0],a=r.webkitRelativePath||"";v(s,a.includes("/")?a.split("/")[0]:a||r.name)}})]}),(0,t.jsxs)("div",{className:"h-16 border-t border-border px-8 py-4 flex items-center justify-end gap-4 bg-surface-elevated shrink-0",children:[(0,t.jsx)("button",{onClick:r,disabled:x,className:"px-4 py-2 text-text-secondary hover:bg-secondary rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:k,disabled:x,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:x?"Creating...":"Create Issue"})]})]})})):null}function O(){let[e,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[o,n]=(0,s.useState)("date"),[d,i]=(0,s.useState)(!1),[c,x]=(0,s.useState)(0),m=async()=>{i(!1),x(e=>e+1)},[u,p]=(0,s.useState)(!0);return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Issues"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Manage and track all project issues"})]}),(0,t.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:[(0,t.jsx)(b,{size:18}),(0,t.jsx)("span",{children:"New Issue"})]})]}),(0,t.jsxs)("div",{className:"h-16 border-b border-border px-6 py-4 flex items-center gap-4",children:[(0,t.jsxs)("button",{onClick:()=>p(e=>!e),className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-secondary rounded-lg",children:[(0,t.jsx)("span",{children:"Filter"}),(0,t.jsx)(h,{size:16})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-secondary rounded-lg",children:[(0,t.jsx)(g,{size:16}),(0,t.jsxs)("span",{children:["Sort: ",o]})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(M,{onSelectIssue:e=>{r(e),l(!0)},showFilters:u},c)}),a&&e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-auto flex flex-col",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border px-8 py-4 flex items-center justify-between bg-surface-elevated sticky top-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"Issue Details"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:e.id})]}),(0,t.jsx)("button",{onClick:()=>l(!1),className:"p-2 hover:bg-secondary rounded-lg transition-colors text-text-secondary hover:text-foreground",children:(0,t.jsx)(f,{size:20})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsx)(P,{issueId:e.id,isOpen:a,onClose:()=>l(!1)})})]})}),(0,t.jsx)(z,{isOpen:d,onClose:()=>i(!1),onSubmit:m})]})}let F=[{id:"TSK-001",title:"Survey pothole dimensions",status:"in-progress",priority:"high",dueDate:"Today",assignee:"John Smith",relatedIssue:"ISS-001",tags:["inspection","main-st"]},{id:"TSK-002",title:"Document storm drainage concerns",status:"todo",priority:"high",dueDate:"Tomorrow",assignee:"Sarah Johnson",relatedIssue:"ISS-002",tags:["documentation","infrastructure"]},{id:"TSK-003",title:"Schedule traffic signal repair",status:"completed",priority:"medium",dueDate:"3 days ago",assignee:"Mike Chen",relatedIssue:"ISS-003",tags:["scheduling","safety"]},{id:"TSK-004",title:"Measure sidewalk crack depth",status:"todo",priority:"medium",dueDate:"Next week",assignee:"Emma Davis",relatedIssue:"ISS-004",tags:["measurement","maintenance"]},{id:"TSK-005",title:"Plan vegetation removal",status:"in-progress",priority:"low",dueDate:"Next week",assignee:"John Smith",relatedIssue:"ISS-005",tags:["planning","maintenance"]}],R={todo:"bg-secondary text-text-secondary","in-progress":"bg-primary/10 text-primary",completed:"bg-success/10 text-success"},q={low:"text-text-tertiary",medium:"text-yellow-600",high:"text-error"};function $({selectedId:e,onSelect:s}){return(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-surface-elevated border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"ID"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Priority"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Due"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:F.map(r=>(0,t.jsxs)("tr",{onClick:()=>s(r.id),className:`cursor-pointer transition-colors ${e===r.id?"bg-primary-light":"hover:bg-secondary"}`,children:[(0,t.jsx)("td",{className:"px-6 py-4 font-mono text-xs text-primary",children:r.id}),(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-foreground",children:r.title}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${R[r.status]}`,children:"in-progress"===r.status?"In Progress":r.status.charAt(0).toUpperCase()+r.status.slice(1)})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`text-xs font-semibold ${q[r.priority]}`,children:r.priority.charAt(0).toUpperCase()+r.priority.slice(1)})}),(0,t.jsx)("td",{className:"px-6 py-4 text-text-secondary text-xs",children:r.dueDate})]},r.id))})]})})}let K=o("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),J=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),L=["todo","in-progress","completed"],V=["low","medium","high"];function H({taskId:e}){let r,a=(r={"TSK-001":{id:"TSK-001",title:"Survey pothole dimensions",description:"Conduct field survey to measure and document the pothole dimensions on Main Street.",status:"in-progress",priority:"high",dueDate:"2026-01-08",assignee:"John Smith",relatedIssue:"ISS-001",tags:["inspection","main-st"],createdDate:"2026-01-05",subtasks:[{id:1,title:"Measure length and width",completed:!0},{id:2,title:"Document depth",completed:!0},{id:3,title:"Take reference photos",completed:!1}]},"TSK-002":{id:"TSK-002",title:"Document storm drainage concerns",description:"Document all observations and concerns related to the storm drainage system.",status:"todo",priority:"high",dueDate:"2026-01-09",assignee:"Sarah Johnson",relatedIssue:"ISS-002",tags:["documentation","infrastructure"],createdDate:"2026-01-06",subtasks:[{id:1,title:"Inspect drain inlet",completed:!1},{id:2,title:"Document overflow areas",completed:!1}]},"TSK-003":{id:"TSK-003",title:"Schedule traffic signal repair",description:"Coordinate with maintenance team to schedule and complete the traffic signal repair.",status:"completed",priority:"medium",dueDate:"2026-01-05",assignee:"Mike Chen",relatedIssue:"ISS-003",tags:["scheduling","safety"],createdDate:"2026-01-02",subtasks:[{id:1,title:"Contact repair contractor",completed:!0},{id:2,title:"Schedule repair date",completed:!0},{id:3,title:"Arrange traffic control",completed:!0}]},"TSK-004":{id:"TSK-004",title:"Measure sidewalk crack depth",description:"Use appropriate tools to measure and record the depth of the sidewalk crack.",status:"todo",priority:"medium",dueDate:"2026-01-15",assignee:"Emma Davis",relatedIssue:"ISS-004",tags:["measurement","maintenance"],createdDate:"2026-01-07",subtasks:[{id:1,title:"Gather measurement tools",completed:!1},{id:2,title:"Perform measurements",completed:!1}]},"TSK-005":{id:"TSK-005",title:"Plan vegetation removal",description:"Develop a comprehensive plan for safe vegetation removal and area cleanup.",status:"in-progress",priority:"low",dueDate:"2026-01-15",assignee:"John Smith",relatedIssue:"ISS-005",tags:["planning","maintenance"],createdDate:"2026-01-04",subtasks:[{id:1,title:"Assess vegetation extent",completed:!0},{id:2,title:"Plan removal method",completed:!1}]}})[e]||r["TSK-001"],[l,o]=(0,s.useState)(!1),[n,d]=(0,s.useState)(a),[i,c]=(0,s.useState)(""),x=()=>{i.trim()&&(d({...n,subtasks:[...n.subtasks,{id:Math.max(...n.subtasks.map(e=>e.id),0)+1,title:i,completed:!1}]}),c(""))};return(0,t.jsx)("div",{className:"h-full overflow-auto",children:(0,t.jsxs)("div",{className:"p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-mono text-primary",children:n.id}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"todo"===n.status?"bg-secondary text-text-secondary":"in-progress"===n.status?"bg-primary/10 text-primary":"bg-success/10 text-success"}`,children:"in-progress"===n.status?"In Progress":n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),l?(0,t.jsx)("input",{type:"text",value:n.title,onChange:e=>d({...n,title:e.target.value}),className:"text-3xl font-bold text-foreground bg-secondary rounded px-3 py-2 w-full"}):(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:n.title})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{o(!1)},className:"px-4 py-2 bg-success text-white rounded-lg hover:bg-success/90 text-sm font-medium transition-colors",children:"Save"}),(0,t.jsx)("button",{onClick:()=>{d(a),o(!1)},className:"px-4 py-2 bg-secondary text-foreground rounded-lg hover:bg-secondary/80 text-sm font-medium transition-colors",children:"Cancel"})]}):(0,t.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 text-primary hover:bg-primary/10 rounded-lg transition-colors text-sm",children:[(0,t.jsx)(K,{size:16}),"Edit"]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Description"}),l?(0,t.jsx)("textarea",{value:n.description,onChange:e=>d({...n,description:e.target.value}),className:"w-full p-3 bg-secondary border border-border rounded-lg text-foreground text-sm resize-none h-24"}):(0,t.jsx)("p",{className:"text-text-secondary",children:n.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Status"}),l?(0,t.jsx)("select",{value:n.status,onChange:e=>d({...n,status:e.target.value}),className:"w-full px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm",children:L.map(e=>(0,t.jsx)("option",{value:e,children:"in-progress"===e?"In Progress":e.charAt(0).toUpperCase()+e.slice(1)},e))}):(0,t.jsx)("p",{className:"text-foreground text-sm",children:"in-progress"===n.status?"In Progress":n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Priority"}),l?(0,t.jsx)("select",{value:n.priority,onChange:e=>d({...n,priority:e.target.value}),className:"w-full px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm",children:V.map(e=>(0,t.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}):(0,t.jsx)("p",{className:`text-sm font-semibold ${"low"===n.priority?"text-text-tertiary":"medium"===n.priority?"text-yellow-600":"text-error"}`,children:n.priority.charAt(0).toUpperCase()+n.priority.slice(1)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Due Date"}),l?(0,t.jsx)("input",{type:"date",value:n.dueDate,onChange:e=>d({...n,dueDate:e.target.value}),className:"w-full px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm"}):(0,t.jsx)("p",{className:"text-foreground text-sm",children:n.dueDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Assignee"}),l?(0,t.jsx)("input",{type:"text",value:n.assignee,onChange:e=>d({...n,assignee:e.target.value}),className:"w-full px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm"}):(0,t.jsx)("p",{className:"text-foreground text-sm",children:n.assignee})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Related Issue"}),l?(0,t.jsx)("input",{type:"text",value:n.relatedIssue||"",onChange:e=>d({...n,relatedIssue:e.target.value}),className:"w-full px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm"}):(0,t.jsx)("p",{className:"text-primary font-mono text-sm",children:n.relatedIssue||"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary mb-2 block",children:"Created"}),(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:n.createdDate})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Tags"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n.tags.map((e,s)=>(0,t.jsxs)("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium",children:[e,l&&(0,t.jsx)("button",{onClick:()=>d({...n,tags:n.tags.filter((e,t)=>t!==s)}),className:"ml-2 text-primary hover:text-error",children:"×"})]},s)),l&&(0,t.jsx)("button",{className:"px-3 py-1 border border-dashed border-primary text-primary rounded-full text-xs font-medium hover:bg-primary/10 transition-colors",children:"+ Add tag"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Subtasks"}),(0,t.jsx)("div",{className:"space-y-2 mb-4",children:n.subtasks.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-secondary rounded-lg",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.completed,onChange:t=>{d({...n,subtasks:n.subtasks.map(s=>s.id===e.id?{...s,completed:t.target.checked}:s)})},className:"w-4 h-4 rounded border-border",disabled:!l}),(0,t.jsx)("span",{className:`flex-1 text-sm ${e.completed?"text-text-tertiary line-through":"text-foreground"}`,children:e.title}),l&&(0,t.jsx)("button",{onClick:()=>d({...n,subtasks:n.subtasks.filter(t=>t.id!==e.id)}),className:"text-error hover:bg-error/10 p-1 rounded transition-colors",children:(0,t.jsx)(J,{size:14})})]},e.id))}),l&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&x(),placeholder:"Add a new subtask...",className:"flex-1 px-3 py-2 bg-secondary border border-border rounded-lg text-foreground text-sm placeholder:text-text-tertiary"}),(0,t.jsx)("button",{onClick:x,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover text-sm transition-colors",children:(0,t.jsx)(b,{size:16})})]})]})]})})}function U(){let[e,r]=(0,s.useState)("TSK-001"),[a,l]=(0,s.useState)("dueDate");return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Tasks"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Manage project tasks and assignments"})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:[(0,t.jsx)(b,{size:18}),(0,t.jsx)("span",{children:"New Task"})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r border-border flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border px-6 py-4 flex items-center gap-4",children:[(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-secondary rounded-lg",children:[(0,t.jsx)("span",{children:"Filter"}),(0,t.jsx)(h,{size:16})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-secondary rounded-lg",children:[(0,t.jsx)(g,{size:16}),(0,t.jsxs)("span",{children:["Sort: ",a]})]})]}),(0,t.jsx)($,{selectedId:e,onSelect:r})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsx)(H,{taskId:e})})]})]})}let B=[{id:"photo-1",name:"Main St Damage - Overview",linkedIssue:"ISS-001",address:"123 Main St",dateTaken:"Jan 3, 2024",photographer:"John Smith"},{id:"photo-2",name:"Main St Damage - Detail",linkedIssue:"ISS-001",address:"123 Main St",dateTaken:"Jan 3, 2024",photographer:"John Smith"},{id:"photo-3",name:"Storm Drain #1",linkedIssue:"ISS-002",address:"456 Oak Ave",dateTaken:"Jan 2, 2024",photographer:"Jane Doe"},{id:"photo-4",name:"Storm Drain #2",linkedIssue:"ISS-002",address:"458 Oak Ave",dateTaken:"Jan 2, 2024",photographer:"Jane Doe"}];function _({selectedId:e,onSelect:s,filterType:r}){return(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-surface-elevated border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Issue"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-text-secondary",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:B.map(r=>(0,t.jsxs)("tr",{onClick:()=>s(r.id),className:`cursor-pointer transition-colors ${e===r.id?"bg-primary-light":"hover:bg-secondary"}`,children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-foreground",children:r.name}),(0,t.jsx)("td",{className:"px-6 py-4 text-xs font-mono text-primary",children:r.linkedIssue}),(0,t.jsx)("td",{className:"px-6 py-4 text-text-secondary text-xs",children:r.dateTaken})]},r.id))})]})})}function G({photoId:e}){let[r,a]=(0,s.useState)(!0),[l,o]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-auto",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border px-8 py-4 flex items-center bg-surface-elevated",children:(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"Main St Damage - Overview"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col p-8 overflow-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-lg overflow-hidden aspect-video mb-4",children:(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-300 to-gray-400 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-2",children:"📸"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Photo Preview"})]})})}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"Preview of selected photo asset"})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-6 mb-8",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-6",children:"Metadata"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Linked Issue"}),(0,t.jsx)("input",{type:"text",value:"ISS-001",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Address"}),(0,t.jsx)("input",{type:"text",value:"123 Main St",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Observation"}),(0,t.jsx)("input",{type:"text",value:"Overall view of pothole damage affecting traffic lane",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Notes"}),(0,t.jsx)("textarea",{value:"Taken during midday, shows clear visibility of damage area",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground h-20 resize-none",readOnly:!0})]})]})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-6 space-y-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-6",children:"Include in Output"}),(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:r,onChange:e=>a(e.target.checked),className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Include in Report"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked),className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Include in Presentation"})]})]})]})]})}function Z(){let[e,r]=(0,s.useState)("photo-1"),[a,l]=(0,s.useState)("issues");return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Photos"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Manage photo assets and metadata"})]})}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r border-border flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border px-6 py-4 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-text-secondary",children:"Filter by:"}),(0,t.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-border rounded-lg text-sm bg-background text-foreground cursor-pointer",children:[(0,t.jsx)("option",{value:"issues",children:"Issues"}),(0,t.jsx)("option",{value:"addresses",children:"Addresses"}),(0,t.jsx)("option",{value:"custom",children:"Custom Groups"})]})]}),(0,t.jsx)(_,{selectedId:e,onSelect:r,filterType:a})]}),(0,t.jsx)("div",{className:"flex-1 flex flex-col",children:(0,t.jsx)(G,{photoId:e})})]})]})}function Q(){let[e,r]=(0,s.useState)({issueType:"",address:"",keywords:"",dateRange:"",photoIncluded:!1,inReport:!1,inPresentation:!1});return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Search & Filters"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Find issues, photos, and addresses with advanced queries"})]})}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r border-border overflow-auto p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Build Your Search"}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1 text-sm text-primary hover:bg-primary-light rounded-lg",children:[(0,t.jsx)(b,{size:16}),(0,t.jsx)("span",{children:"Save Search"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Issue Type"}),(0,t.jsxs)("select",{className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"road",children:"Road Damage"}),(0,t.jsx)("option",{value:"infra",children:"Infrastructure"}),(0,t.jsx)("option",{value:"safety",children:"Safety"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Address"}),(0,t.jsx)("input",{type:"text",placeholder:"Search address...",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Keywords"}),(0,t.jsx)("input",{type:"text",placeholder:"Search observations and notes...",className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Date Range"}),(0,t.jsxs)("select",{className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[(0,t.jsx)("option",{value:"",children:"Any Date"}),(0,t.jsx)("option",{value:"week",children:"Last Week"}),(0,t.jsx)("option",{value:"month",children:"Last Month"}),(0,t.jsx)("option",{value:"quarter",children:"Last Quarter"})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t border-border",children:[(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Has Photos"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"In Reports"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"In Presentations"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border px-8 py-4 flex items-center bg-surface-elevated",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Found 12 results matching your criteria"})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsx)("div",{className:"divide-y divide-border",children:[{type:"issue",name:"Pothole on Main St",matches:"ISS-001, 2 addresses, 4 photos"},{type:"photo",name:"Main St Damage - Overview",matches:"Linked to ISS-001, in reports"},{type:"address",name:"123 Main St",matches:"Part of ISS-001, 3 photos attached"}].map((e,s)=>(0,t.jsxs)("div",{className:"p-6 border-b border-border hover:bg-secondary transition-colors cursor-pointer",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:e.matches}),(0,t.jsx)("span",{className:"inline-block mt-3 px-2 py-1 bg-primary-light text-primary text-xs font-medium rounded",children:e.type})]},s))})})]})]})]})}let W=o("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Y=o("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);function X(){let[e,r]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[o,n]=(0,s.useState)(!0),[d,i]=(0,s.useState)([]),{filters:c}=E(),[x,m]=(0,s.useState)({projectName:"Issue Report",businessName:"Organization",includeIssues:!0,photoLayout:"grid-2"});(0,s.useEffect)(()=>{(async()=>{try{n(!0);let e=await j();r(e),i(e.slice(0,10).map(e=>e.name));let t=await N();l(t||[])}catch(e){console.error("[v0] Error fetching report data:",e)}finally{n(!1)}})()},[]);let u=e.filter(e=>d.includes(e.name)).sort((e,t)=>(e.index||0)-(t.index||0));return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Reports"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Generate professional reports from your issues"})]})}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/3 border-r border-border overflow-auto p-8",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-8",children:"Report Configuration"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Project Name"}),(0,t.jsx)("input",{type:"text",value:x.projectName,onChange:e=>m({...x,projectName:e.target.value}),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Business Name"}),(0,t.jsx)("input",{type:"text",value:x.businessName,onChange:e=>m({...x,businessName:e.target.value}),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase",children:"Print Date"}),(0,t.jsx)("input",{type:"text",value:new Date().toLocaleDateString(),className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-secondary text-text-secondary",disabled:!0})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-border",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-text-secondary uppercase mb-3 block",children:"Fields to Include"}),(0,t.jsx)("div",{className:"space-y-2 max-h-40 overflow-auto",children:e.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-2 hover:bg-secondary rounded",children:[(0,t.jsx)("input",{type:"checkbox",checked:d.includes(e.name),onChange:()=>{var t;return t=e.name,void i(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"w-4 h-4 rounded border-border"}),(0,t.jsx)("span",{className:"text-sm text-foreground",children:e.label||e.name})]},e.name))})]}),(0,t.jsx)("div",{className:"space-y-3 pt-4 border-t border-border",children:(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:x.includeIssues,onChange:e=>m({...x,includeIssues:e.target.checked}),className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Include Issues"})]})}),(0,t.jsxs)("div",{className:"pt-6 border-t border-border space-y-2",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors font-medium",children:[(0,t.jsx)(W,{size:18}),"Export to PDF"]}),(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 border border-border rounded-lg hover:bg-secondary transition-colors font-medium",children:[(0,t.jsx)(Y,{size:18}),"Print Preview"]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-border px-8 py-4 flex items-center bg-surface-elevated",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Report Preview"}),(0,t.jsxs)("span",{className:"ml-auto text-sm text-text-secondary",children:["Total Issues: ",a.length]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-8 bg-secondary",children:o?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-text-secondary",children:"Loading report data..."})}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto bg-background rounded-lg shadow-lg p-12 min-h-screen",children:[(0,t.jsxs)("div",{className:"text-center mb-12 pb-8 border-b-2 border-border",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:x.projectName}),(0,t.jsx)("p",{className:"text-text-secondary mb-4",children:x.businessName}),(0,t.jsxs)("p",{className:"text-sm text-text-tertiary",children:["Generated: ",new Date().toLocaleDateString()]})]}),x.includeIssues&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Issues Summary"}),(0,t.jsx)("div",{className:"bg-secondary rounded-lg p-4 space-y-3",children:(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total Issues:"})," ",a.length]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Issue Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[a.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"border-l-4 border-primary pl-4 py-2",children:[(0,t.jsxs)("h3",{className:"font-semibold text-foreground",children:["Issue #",e.id]}),(0,t.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-4 text-sm",children:u.map(s=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-text-secondary",children:s.label||s.name}),(0,t.jsx)("p",{className:"text-foreground",children:e[s.name]||"-"})]},`${e.id}-${s.name}`))})]},e.id)),a.length>5&&(0,t.jsxs)("p",{className:"text-sm text-text-secondary italic pt-4",children:["+ ",a.length-5," more issues..."]})]})]})]})]})})]})]})]})}let ee=o("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function et(){return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Import / Export"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Manage data flow between formats and applications"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto px-8 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl space-y-8",children:[(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsx)("div",{className:"p-3 bg-primary-light rounded-lg",children:(0,t.jsx)(ee,{size:24,className:"text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Import Data"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary mt-1",children:"Migrate from existing Excel and photo collections"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Import Issue Records from Excel"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-primary rounded-lg p-8 text-center cursor-pointer hover:bg-primary-light transition-colors",children:[(0,t.jsx)("p",{className:"text-sm text-text-secondary mb-2",children:"Drag and drop your Excel file or click to browse"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"Supports .xlsx and .csv formats"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Batch Import Photos"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-primary rounded-lg p-8 text-center cursor-pointer hover:bg-primary-light transition-colors",children:[(0,t.jsx)("p",{className:"text-sm text-text-secondary mb-2",children:"Drag and drop photos or click to browse"}),(0,t.jsx)("p",{className:"text-xs text-text-tertiary",children:"Auto-associates with existing issues and addresses"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsx)("div",{className:"p-3 bg-success/10 rounded-lg",children:(0,t.jsx)(m,{size:24,className:"text-success"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Export Data"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary mt-1",children:"Send your data to Excel, PDF, or organized folders"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{className:"p-6 border border-border rounded-lg hover:bg-background transition-colors text-left",children:[(0,t.jsx)("div",{className:"font-semibold text-foreground mb-2",children:"Export to Excel"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Export issue tables and metadata"})]}),(0,t.jsxs)("button",{className:"p-6 border border-border rounded-lg hover:bg-background transition-colors text-left",children:[(0,t.jsx)("div",{className:"font-semibold text-foreground mb-2",children:"Export to PDF Report"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Generate formatted PDF reports"})]}),(0,t.jsxs)("button",{className:"p-6 border border-border rounded-lg hover:bg-background transition-colors text-left",children:[(0,t.jsx)("div",{className:"font-semibold text-foreground mb-2",children:"Export Photos Only"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Save organized photo folders"})]}),(0,t.jsxs)("button",{className:"p-6 border border-border rounded-lg hover:bg-background transition-colors text-left",children:[(0,t.jsx)("div",{className:"font-semibold text-foreground mb-2",children:"Export as Backup"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Complete database archive"})]})]})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-6",children:"Recent Activity"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:"Exported Report: Q4 Infrastructure"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"January 2, 2024"})]}),(0,t.jsx)("span",{className:"text-xs text-text-tertiary",children:"PDF • 2.4 MB"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:"Imported 45 Photos"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"December 28, 2023"})]}),(0,t.jsx)("span",{className:"text-xs text-text-tertiary",children:"12 auto-linked"})]})]})]})]})})]})}let es=o("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),er=0,ea=new Map,el=e=>{if(ea.has(e))return;let t=setTimeout(()=>{ea.delete(e),ed({type:"REMOVE_TOAST",toastId:e})},1e6);ea.set(e,t)},eo=[],en={toasts:[]};function ed(e){en=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?el(s):e.toasts.forEach(e=>{el(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(en,e),eo.forEach(e=>{e(en)})}function ei({...e}){let t=(er=(er+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>ed({type:"DISMISS_TOAST",toastId:t});return ed({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>ed({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function ec(){let[e,r]=(0,s.useState)([{id:1,name:"Priority",type:"dropdown",values:["Low","Medium","High"]},{id:2,name:"Cost Estimate",type:"number"},{id:3,name:"Assigned To",type:"text"}]),[a,l]=(0,s.useState)(!1),{toast:o}=function(){let[e,t]=s.useState(en);return s.useEffect(()=>(eo.push(t),()=>{let e=eo.indexOf(t);e>-1&&eo.splice(e,1)}),[e]),{...e,toast:ei,dismiss:e=>ed({type:"DISMISS_TOAST",toastId:e})}}();return(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"h-16 border-b border-border flex items-center justify-between px-8",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Settings"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Customize fields and default behaviors"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto px-8 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl space-y-8",children:[(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Custom Fields"}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:[(0,t.jsx)(b,{size:18}),(0,t.jsx)("span",{children:"Add Field"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-background rounded-lg border border-border hover:border-primary transition-colors",children:[(0,t.jsx)(es,{size:18,className:"text-text-tertiary cursor-grab"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-text-secondary capitalize",children:e.type})]}),(0,t.jsx)("button",{className:"p-2 hover:bg-error/10 rounded text-error",children:(0,t.jsx)(J,{size:18})})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Report Templates"}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors",children:[(0,t.jsx)(b,{size:18}),(0,t.jsx)("span",{children:"New Template"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-4 bg-background rounded-lg border border-border hover:border-primary transition-colors cursor-pointer",children:[(0,t.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Standard Issue Report"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Default template for all reports"})]}),(0,t.jsxs)("div",{className:"p-4 bg-background rounded-lg border border-border hover:border-primary transition-colors cursor-pointer",children:[(0,t.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Photo Catalog"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"Photo-focused report template"})]})]})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-6",children:"Field Visibility"}),(0,t.jsx)("div",{className:"space-y-3",children:["Issue Name","Issue Type","Project Name","Jurisdiction","Date Observed","Status"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-3 hover:bg-background rounded-lg transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 rounded border-2 border-primary accent-primary cursor-pointer"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:e})]},e))})]}),(0,t.jsxs)("div",{className:"bg-secondary rounded-lg p-8",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-6",children:"Application Settings"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary uppercase",children:"Default View"}),(0,t.jsxs)("select",{className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[(0,t.jsx)("option",{children:"Split View (List + Details)"}),(0,t.jsx)("option",{children:"List Only"}),(0,t.jsx)("option",{children:"Details Only"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-text-secondary uppercase",children:"Auto-Save Interval"}),(0,t.jsxs)("select",{className:"mt-2 w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground",children:[(0,t.jsx)("option",{children:"Every 30 seconds"}),(0,t.jsx)("option",{children:"Every 1 minute"}),(0,t.jsx)("option",{children:"Every 5 minutes"}),(0,t.jsx)("option",{children:"Manual only"})]})]})]})]})]})})]})}function ex(){let[e,r]=(0,s.useState)("issues");return(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsx)(p,{currentScreen:e,onScreenChange:r}),(0,t.jsx)("main",{className:"flex-1 flex flex-col overflow-hidden",children:(()=>{switch(console.log("Current Screen:",e),e){case"issues":return(0,t.jsx)(O,{});case"tasks":return(0,t.jsx)(U,{});case"photos":return(0,t.jsx)(Z,{});case"search":return(0,t.jsx)(Q,{});case"reports":return(0,t.jsx)(X,{});case"import-export":return(0,t.jsx)(et,{});case"settings":return(0,t.jsx)(ec,{})}})()})]})}e.s(["default",()=>ex],31713)}]);